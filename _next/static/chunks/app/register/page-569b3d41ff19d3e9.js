(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[454],{740:(e,a,t)=>{"use strict";t.d(a,{Ay:()=>r,D1:()=>o,Uh:()=>l,q5:()=>n});let s=(0,t(1990).Z0)({name:"register",initialState:{name:"",email:"",password:""},reducers:{setNameReg:(e,a)=>{e.name=a.payload},setEmailReg:(e,a)=>{e.email=a.payload},setPasswordReg:(e,a)=>{e.password=a.payload}}}),r=s.reducer,{setEmailReg:o,setPasswordReg:l,setNameReg:n}=s.actions},1491:(e,a,t)=>{"use strict";t.d(a,{V:()=>r,m:()=>s});let s="https://chat-server2-p344.onrender.com",r="https://chat-server-1-5wi9.onrender.com"},3281:(e,a,t)=>{"use strict";t.d(a,{A:()=>r,E:()=>o});let s=(0,t(1990).Z0)({name:"currentAccount",initialState:{id:null,name:"",email:"",password:""},reducers:{setAccount:(e,a)=>{e.id=a.payload.id,e.name=a.payload.name,e.email=a.payload.email,e.password=a.payload.password,console.log("Данные добавлены")}}}),r=s.reducer,{setAccount:o}=s.actions},4282:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>u});var s=t(5155);t(4893);var r=t(4540),o=t(740),l=t(3281),n=t(5899),i=t(3464),m=t(5695),d=t(2115),c=t(1491);let p=()=>{let e=(0,r.wA)(),a=(0,m.useRouter)(),t=(0,r.d4)(e=>e.register.email),o=(0,r.d4)(e=>e.register.password),p=(0,r.d4)(e=>e.register.name),[u,g]=(0,d.useState)(!1),[h,x]=(0,d.useState)(!1),w=(0,n.n)({mutationFn:async e=>{let{name:a,email:s,password:r}=e;if(t.length>0&&p.length>0&&o.length>0&&"@"==p[0]){g(!1),console.log("Условие для отправки данных солюдены"),console.log(p);let e=await i.A.post(c.V+"/name-verification",{currentName:p});if(console.log(e),""===e.data){console.log("Пользвоателе нет"),console.log(c.V+"/register");let e=await i.A.post(c.V+"/register",{name:a,email:s,password:r});if(e.data)return e;throw Error("Ошибка при регистрации!")}x(!0),setTimeout(()=>{x(!1)},1200)}else g(!0),setTimeout(()=>{g(!1)},1500)},onSuccess:async t=>{await e((0,l.E)(t.data)),console.log(p),a.push("/messager")},onError:e=>{console.log("Ошибка",e)}});return(0,s.jsx)(s.Fragment,{children:u||h?(0,s.jsx)("button",{type:"button",className:"btn btn-outline-danger",style:{marginTop:"15px",width:"100%",height:"50px"},children:"".concat(u?"Пожалуйста, правильно заполните все формы!":h&&"Данный никнейм уже занят!")}):(0,s.jsx)("button",{className:"button-add-account",onClick:e=>{e.preventDefault(),w.mutate({name:p,email:t,password:o})},children:w.isPending?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true",style:{marginRight:"5px"}}),"Регистрируемся..."]}):"Зарегистрироваться"})})},u=()=>{let e=(0,r.wA)();return(0,r.d4)(e=>e.register.email),(0,r.d4)(e=>e.register.password),(0,r.d4)(e=>e.register.name),(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"main-login",children:(0,s.jsxs)("form",{className:"mb-3 login",children:[(0,s.jsx)("label",{htmlFor:"exampleFormControlInput1",className:"form-label",children:"Напишите ваш никнейм начиная с символа @"}),(0,s.jsx)("input",{type:"text",className:"form-control",maxLength:10,id:"exampleFormControlInput1",placeholder:"Egor",style:{marginBottom:"10px"},onChange:a=>e((0,o.q5)(a.target.value))}),(0,s.jsx)("label",{htmlFor:"exampleFormControlInput1",className:"form-label",children:"Email"}),(0,s.jsx)("input",{type:"email",className:"form-control",id:"exampleFormControlInput1",placeholder:"name@example.com",style:{marginBottom:"5px"},onChange:a=>{e((0,o.D1)(a.target.value))}}),(0,s.jsx)("label",{htmlFor:"inputPassword5",className:"form-label",children:"Пароль"}),(0,s.jsx)("input",{type:"password",id:"inputPassword5",maxLength:20,className:"form-control","aria-describedby":"passwordHelpBlock",onChange:a=>e((0,o.Uh)(a.target.value))}),(0,s.jsx)("div",{id:"passwordHelpBlock",className:"form-text",children:"Ваш пароль должен состоять из 8-20 символов, состоять из букв и цифр и не должен содержать пробелов, специальных символов или эмодзи."}),(0,s.jsx)(p,{})]})})})}},4893:()=>{},5695:(e,a,t)=>{"use strict";var s=t(8999);t.o(s,"useRouter")&&t.d(a,{useRouter:function(){return s.useRouter}})},9849:(e,a,t)=>{Promise.resolve().then(t.bind(t,4282))}},e=>{var a=a=>e(e.s=a);e.O(0,[786,594,174,441,684,358],()=>a(9849)),_N_E=e.O()}]);