(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{1491:(e,a,s)=>{"use strict";s.d(a,{V:()=>t,m:()=>r});let r="https://chat-server2-p344.onrender.com",t="https://chat-server-1-5wi9.onrender.com"},3281:(e,a,s)=>{"use strict";s.d(a,{A:()=>t,E:()=>l});let r=(0,s(1990).Z0)({name:"currentAccount",initialState:{id:null,name:"",email:"",password:""},reducers:{setAccount:(e,a)=>{e.id=a.payload.id,e.name=a.payload.name,e.email=a.payload.email,e.password=a.payload.password,console.log("Данные добавлены")}}}),t=r.reducer,{setAccount:l}=r.actions},4893:()=>{},5695:(e,a,s)=>{"use strict";var r=s(8999);s.o(r,"useRouter")&&s.d(a,{useRouter:function(){return r.useRouter}})},8378:(e,a,s)=>{"use strict";s.d(a,{Ay:()=>t,wO:()=>n,xI:()=>l});let r=(0,s(1990).Z0)({name:"login",initialState:{email:"",password:""},reducers:{setEmail:(e,a)=>{e.email=a.payload},setPassword:(e,a)=>{e.password=a.payload}}}),t=r.reducer,{setEmail:l,setPassword:n}=r.actions},9517:(e,a,s)=>{Promise.resolve().then(s.bind(s,9690))},9690:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>m});var r=s(5155);s(4893);var t=s(4540),l=s(8378),n=s(3281),o=s(3464),i=s(5695),d=s(5899),u=s(2115),c=s(1491);let m=()=>{let e=(0,t.wA)(),a=(0,t.d4)(e=>e.login.email),s=(0,t.d4)(e=>e.login.password),m=(0,i.useRouter)(),[p,h]=(0,u.useState)(!1),w=(0,d.n)({mutationFn:async e=>{let{email:a,password:s}=e,r=await o.A.post(c.V+"/login",{email:a,password:s});if(r.data)return r;throw Error("User is not found")},onSuccess:a=>{e((0,n.E)(a.data)),m.push("/messager")},onError:e=>{console.error("Ошибка входа:",e),h(!0),setTimeout(()=>{h(!1)},1500)}});return(0,r.jsx)("div",{className:"main-login",children:(0,r.jsxs)("form",{className:"mb-3 login",onSubmit:e=>{e.preventDefault(),w.mutate({email:a,password:s})},children:[(0,r.jsx)("label",{htmlFor:"emailInput",className:"form-label",children:"Email"}),(0,r.jsx)("input",{type:"email",className:"form-control",id:"emailInput",placeholder:"name@example.com",style:{marginBottom:"5px"},value:a,onChange:a=>e((0,l.xI)(a.target.value)),required:!0}),(0,r.jsx)("label",{htmlFor:"passwordInput",className:"form-label",children:"Пароль"}),(0,r.jsx)("input",{type:"password",id:"passwordInput",className:"form-control","aria-describedby":"passwordHelpBlock",value:s,onChange:a=>e((0,l.wO)(a.target.value)),required:!0}),(0,r.jsx)("div",{id:"passwordHelpBlock",className:"form-text",style:{color:"#e4e3e3"},children:"Ваш пароль должен состоять из 8-20 символов, состоять из букв и цифр и не должен содержать пробелов, специальных символов или эмодзи."}),(0,r.jsx)("button",{type:"submit",className:p?"btn btn-outline-danger":"button-add-account",disabled:w.isPending||p,style:p?{marginTop:"15px",width:"100%",height:"50px"}:{},children:w.isPending?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true",style:{marginRight:"5px"}}),"Входим..."]}):p?(0,r.jsx)("span",{children:"Неверный логин или пароль."}):"Войти"})]})})}}},e=>{var a=a=>e(e.s=a);e.O(0,[786,594,174,441,684,358],()=>a(9517)),_N_E=e.O()}]);